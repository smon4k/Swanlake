webpackJsonp([10],{AO5d:function(t,e,a){"use strict";e.a={props:["total","pageSize","currPage"],data:function(){return{}},methods:{handleSizeChange:function(t){this.$emit("changeLimit",t)},handleCurrentChange:function(t){this.$emit("changeSkip",t)}}}},"BTC+":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("div",{staticClass:"project-top"},[a("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0}},[a("el-form-item",{attrs:{label:"角色名称:"}},[a("el-input",{attrs:{clearable:"",placeholder:"角色名称"},model:{value:t.title,callback:function(e){t.title=e},expression:"title"}})],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.SearchClick()}}},[t._v("搜索")]),t._v(" "),a("el-button",{staticClass:"pull-right",attrs:{type:"primary"},on:{click:function(e){return t.AddAuthGrupShow()}}},[t._v("添加角色")])],1)],1)],1),t._v(" "),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,height:"550"}},[a("el-table-column",{attrs:{sortable:"",prop:"id",label:"ID",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{prop:"title",label:"角色名称",align:"center"}}),t._v(" "),a("el-table-column",{attrs:{label:"接口权限",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return e.row.rules_array.length?[a("el-tooltip",{attrs:{placement:"top"}},[t._l(e.row.rules_array,function(e,i){return a("div",{key:i,attrs:{slot:"content"},slot:"content"},[a("span",[t._v(t._s(i+1)+". "+t._s(e.name))]),a("br"),t._v(" "),t._l(e.child,function(e,i){return a("div",{key:i},[a("span",[t._v("  "+t._s(i+1)+". "+t._s(e.name))]),t._v(" "),t._l(e.child,function(e,i){return a("div",{key:i},[a("span",[t._v("    "+t._s(i+1)+". "+t._s(e.name))])])})],2)})],2)}),t._v(" "),a("el-button",[t._v("禁止的接口权限")])],2)]:void 0}}],null,!0)}),t._v(" "),a("el-table-column",{attrs:{label:"菜单权限",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return e.row.menu_rules_array.length?[a("el-tooltip",{attrs:{placement:"top"}},[t._l(e.row.menu_rules_array,function(e,i){return a("div",{key:i,attrs:{slot:"content"},slot:"content"},[a("span",[t._v(t._s(i+1)+". "+t._s(e.name))]),a("br"),t._v(" "),t._l(e.child,function(e,i){return a("div",{key:i},[a("span",[t._v("  "+t._s(i+1)+". "+t._s(e.name))]),t._v(" "),t._l(e.child,function(e,i){return a("div",{key:i},[a("span",[t._v("    "+t._s(i+1)+". "+t._s(e.name))])])})],2)})],2)}),t._v(" "),a("el-button",[t._v("拥有的菜单权限")])],2)]:void 0}}],null,!0)}),t._v(" "),a("el-table-column",{attrs:{prop:"status",label:"状态",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return e.row.id>1?[a("el-switch",{attrs:{"active-value":1,"inactive-value":0},on:{change:function(a){return t.startKeywordList(e.row)}},model:{value:e.row.status,callback:function(a){t.$set(e.row,"status",a)},expression:"scope.row.status"}})]:void 0}}],null,!0)}),t._v(" "),a("el-table-column",{attrs:{label:"操作",width:"120",align:"center"},scopedSlots:t._u([{key:"default",fn:function(e){return e.row.id>1?[a("el-button",{attrs:{type:"text"},on:{click:function(a){return t.UpdateAuthGroupInfo(e.row)}}},[t._v("修改")]),t._v(" "),a("el-button",{attrs:{type:"text"},on:{click:function(a){return t.DelData(e.row)}}},[t._v("删除")])]:void 0}}],null,!0)})],1),t._v(" "),a("el-row",[a("el-col",{attrs:{span:24}},[a("div",{staticStyle:{float:"right"}},[a("wbc-page",{attrs:{total:t.total,pageSize:t.pageSize,currPage:t.currPage},on:{changeLimit:t.limitPaging,changeSkip:t.skipPaging}})],1)])],1),t._v(" "),a("el-dialog",{attrs:{title:t.DialogTitle+"角色",visible:t.dialogVisibleShow,width:"50%"},on:{"update:visible":function(e){t.dialogVisibleShow=e}}},[a("el-form",{ref:"FormData",attrs:{model:t.FormData,rules:t.rules,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"角色名称",prop:"title"}},[a("el-input",{attrs:{placeholder:"角色名称"},model:{value:t.FormData.title,callback:function(e){t.$set(t.FormData,"title",e)},expression:"FormData.title"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"菜单权限",prop:"menu_rules"}},[a("el-cascader",{staticStyle:{width:"100%"},attrs:{options:t.AuthMenuRuleData,props:t.AuthRuleProps,clearable:""},model:{value:t.FormData.menu_rules,callback:function(e){t.$set(t.FormData,"menu_rules",e)},expression:"FormData.menu_rules"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"接口权限"}},[a("el-cascader",{staticStyle:{width:"100%"},attrs:{options:t.AuthRuleData,props:t.AuthRulePropss,clearable:"",placeholder:"禁止访问的接口权限"},model:{value:t.FormData.rules,callback:function(e){t.$set(t.FormData,"rules",e)},expression:"FormData.rules"}})],1),t._v(" "),a("el-form-item",{attrs:{align:"right"}},[a("el-button",{on:{click:function(e){return t.resetForm("FormData")}}},[t._v("取消")]),t._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.onUpdateSubmit("FormData")}}},[t._v("立即"+t._s(t.DialogTitle))])],1)],1)],1)],1)},r=[],l={render:i,staticRenderFns:r};e.a=l},Eqnc:function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("nav",[a("div",{staticClass:"grid-content"},[a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{"current-page":t.currPage,"page-sizes":[10,20,30,50,100],"page-size":t.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)])])},r=[],l={render:i,staticRenderFns:r};e.a=l},SfSU:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("mtx9"),r=a("BTC+"),l=a("VU/8"),s=l(i.a,r.a,!1,null,null,null);e.default=s.exports},TZN5:function(t,e,a){e=t.exports=a("FZ+f")(!0),e.push([t.i,".pagination[data-v-385880eb]{float:right}","",{version:3,sources:["/Users/qinlinhui/Sites/WWW/Swanlake/public/AdminServer/src/components/Page.vue"],names:[],mappings:"AACA,6BACE,WAAa,CACd",file:"Page.vue",sourcesContent:["\n.pagination[data-v-385880eb]{\n  float: right;\n}\n"],sourceRoot:""}])},kQ9O:function(t,e,a){var i=a("TZN5");"string"==typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);a("rjj0")("6a9f0435",i,!0,{})},mtx9:function(t,e,a){"use strict";var i=a("pMNZ"),r=a("+zHA");e.a={data:function(){return{currPage:1,pageSize:20,total:100,PageSearchWhere:[],title:"",tableData:[],dialogVisibleShow:!1,FormData:{id:"",title:"",rules:[],menu_rules:[]},DialogTitle:"添加",is_save_add_start:1,AuthGroupData:[],AuthRuleData:[],AuthMenuRuleData:[],rules:{title:[{required:!0,message:"请输入角色名称",trigger:"blur"}],rules:[{required:!0,message:"请选择接口权限",trigger:"change"}],menu_rules:[{required:!0,message:"请选择菜单权限",trigger:"change"}]},AuthRuleProps:{multiple:!0,value:"id",label:"name",children:"child"},AuthRulePropss:{multiple:!0,value:"id",label:"name",children:"child"},AuthRuleSelectValue:[],AuthMenuRuleSelectValue:[]}},methods:{getListData:function(t){var e=this,a=this.$data;(!t||void 0==t||t.length<=0)&&(t={limit:a.pageSize,page:a.currPage,export:1}),Object(r.b)("/Admin/Authgroup/getAuthGroupList",t,function(t){1e4==t.data.code?(e.tableData=t.data.data.data,e.total=t.data.data.count):e.$message.error("加载数据失败")})},SearchClick:function(){var t={page:this.currPage,limit:this.pageSize,export:1};this.title&&""!==this.title&&(t.title=this.title),this.PageSearchWhere=[],this.PageSearchWhere=t,this.getListData(t)},SearchReset:function(){this.title="",this.PageSearchWhere=[],this.getData()},limitPaging:function(t){this.pageSize=t,this.PageSearchWhere.limit&&void 0!==this.PageSearchWhere.limit&&(this.PageSearchWhere.limit=t),this.getData(this.PageSearchWhere)},skipPaging:function(t){this.currPage=t,this.PageSearchWhere.page&&void 0!==this.PageSearchWhere.page&&(this.PageSearchWhere.page=t),this.getData(this.PageSearchWhere)},DelData:function(t){var e=this;this.$confirm("此操作将永久删除该数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(r.b)("/Admin/Authgroup/delAuthGroupRow",{id:t.id},function(t){t&&1e4==t.data.code?(e.getListData(),e.$message({type:"success",message:"删除成功!"})):e.$message.error(t.data.msg)})}).catch(function(){e.$message({type:"info",message:"已取消删除"})})},UpdateAuthGroupInfo:function(t){console.log(t),this.is_save_add_start=2,this.DialogTitle="修改",this.FormData.id=t.id,this.FormData.title=t.title,this.FormData.rules=t.rules_arr_select,this.FormData.menu_rules=t.menu_rules_array_select,this.dialogVisibleShow=!0},onUpdateSubmit:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return console.log("error submit!!"),!1;if(1==e.is_save_add_start)var a="/Admin/Authgroup/addAuthGroupInfo";else var a="/Admin/Authgroup/sevaAuthGroupInfo";Object(r.c)(a,e.FormData,function(t){t&&1e4==t.data.code?(e.dialogVisibleShow=!1,e.$message({type:"success",message:e.DialogTitle+"成功!"}),e.getListData()):(e.dialogVisibleShow=!1,e.$message.error(e.DialogTitle+"失败"))})})},AddAuthGrupShow:function(){this.is_save_add_start=1,this.DialogTitle="添加",this.FormData={id:"",title:""},this.AuthRuleSelectValue=[],this.AuthMenuRuleSelectValue=[],this.dialogVisibleShow=!0},getAuthGroupData:function(){var t=this;Object(r.b)("/Admin/Authgroup/getAuthGroupList",{},function(e){e&&1e4==e.data.code?t.AuthGroupData=e.data.data:t.$message.error("获取权限角色数据失败")})},getAuthRuleData:function(){var t=this;Object(r.b)("/Admin/Authrule/getAuthRuleList",{status:1},function(e){e&&1e4==e.data.code?t.AuthRuleData=e.data.data.data:t.$message.error("获取接口权限数据失败")})},getAuthMenuRuleData:function(){var t=this;Object(r.b)("/Admin/Authmenurule/getAuthMenuRuleList",{status:1},function(e){e&&1e4==e.data.code?t.AuthMenuRuleData=e.data.data.data:t.$message.error("获取接口权限数据失败")})},startKeywordList:function(t){var e=this;Object(r.b)("/Admin/Authgroup/startAuthGroupRule",{id:t.id,start:t.status},function(t){1e4==t.data.code?e.$message({message:"修改成功",type:"success"}):e.$message.error("修改失败")})},resetForm:function(t){this.$refs[t].resetFields(),this.dialogVisibleShow=!1}},created:function(){this.getListData(),this.getAuthGroupData(),this.getAuthRuleData(),this.getAuthMenuRuleData()},components:{"wbc-page":i.a}}},pMNZ:function(t,e,a){"use strict";function i(t){a("kQ9O")}var r=a("AO5d"),l=a("Eqnc"),s=a("VU/8"),n=i,o=s(r.a,l.a,!1,n,"data-v-385880eb",null);e.a=o.exports}});
//# sourceMappingURL=10.js.map?v=1661091079606