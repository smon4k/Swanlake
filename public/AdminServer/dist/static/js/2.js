webpackJsonp([2],{"30KW":function(e,t,a){var n=a("kM2E"),i=a("7KvD").isFinite;n(n.S,"Number",{isFinite:function(e){return"number"==typeof e&&i(e)}})},"3eyQ":function(e,t,a){var n=a("L3CQ");"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);a("rjj0")("e5f4df68",n,!0,{})},"5zde":function(e,t,a){a("zQR9"),a("qyJz"),e.exports=a("FeBl").Array.from},AMV0:function(e,t,a){e.exports={default:a("k2Ib"),__esModule:!0}},AO5d:function(e,t,a){"use strict";t.a={props:["total","pageSize","currPage"],data:function(){return{}},methods:{handleSizeChange:function(e){this.$emit("changeLimit",e)},handleCurrentChange:function(e){this.$emit("changeSkip",e)}}}},Eqnc:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("nav",[a("div",{staticClass:"grid-content"},[a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{"current-page":e.currPage,"page-sizes":[10,20,30,50,100],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)])])},i=[],o={render:n,staticRenderFns:i};t.a=o},Gu7T:function(e,t,a){"use strict";t.__esModule=!0;var n=a("c/Tr"),i=function(e){return e&&e.__esModule?e:{default:e}}(n);t.default=function(e){if(Array.isArray(e)){for(var t=0,a=Array(e.length);t<e.length;t++)a[t]=e[t];return a}return(0,i.default)(e)}},L3CQ:function(e,t,a){t=e.exports=a("FZ+f")(!0),t.push([e.i,".project-top[data-v-e94d13aa]{margin-bottom:20px;margin-top:20px}.avatar-uploader .el-upload[data-v-e94d13aa]{border:1px dashed #d9d9d9;border-radius:6px;cursor:pointer;position:relative;overflow:hidden}.avatar-uploader .el-upload[data-v-e94d13aa]:hover{border-color:#409eff}.avatar-uploader-icon[data-v-e94d13aa]{font-size:28px;color:#8c939d;width:178px;height:178px;line-height:178px;text-align:center}.avatar[data-v-e94d13aa]{width:100%;height:230px;display:block}.el-radio-group .el-radio+.el-radio[data-v-e94d13aa]{margin-left:0!important}.pages[data-v-e94d13aa]{margin-top:0!important;margin-bottom:80px!important}.el-breadcrumb[data-v-e94d13aa]{z-index:10!important}.el-carousel__item h3[data-v-e94d13aa]{color:#475669;font-size:18px;opacity:.75;line-height:300px;margin:0}.el-carousel__item[data-v-e94d13aa]:nth-child(2n){background-color:#99a9bf}.el-carousel__item[data-v-e94d13aa]:nth-child(odd){background-color:#d3dce6}::v-deep .preview-class img[data-v-e94d13aa]{width:100%;height:100%;-o-object-fit:contain;object-fit:contain}::v-deep .preview-class video[data-v-e94d13aa]{width:100%;height:70vh}::v-deep .preview-class .el-dialog__headerbtn[data-v-e94d13aa]{z-index:1000;color:#030303}::v-deep .preview-class .el-dialog__headerbtn .el-dialog__close[data-v-e94d13aa]{color:#030303;font-size:20px;font-weight:900}::v-deep .preview-class .el-dialog__header[data-v-e94d13aa]{padding:0!important}::v-deep .preview-class .el-dialog__body[data-v-e94d13aa]{padding:0}","",{version:3,sources:["/Users/qinlh/www/Swanlake/public/AdminServer/src/pages/Grid/positions.vue"],names:[],mappings:"AACA,8BAA8B,mBAAmB,eAAe,CAC/D,AACD,6CAA6C,0BAA0B,kBAAkB,eAAe,kBAAkB,eAAe,CACxI,AACD,mDAAmD,oBAAoB,CACtE,AACD,uCAAuC,eAAe,cAAc,YAAY,aAAa,kBAAkB,iBAAiB,CAC/H,AACD,yBAAyB,WAAW,aAAa,aAAa,CAC7D,AACD,qDAAqD,uBAAwB,CAC5E,AACD,wBAAwB,uBAAwB,4BAA6B,CAC5E,AACD,gCAAgC,oBAAqB,CACpD,AACD,uCAAuC,cAAc,eAAe,YAAY,kBAAkB,QAAQ,CACzG,AACD,kDAAkD,wBAAwB,CACzE,AACD,mDAAoD,wBAAwB,CAC3E,AACD,6CAA6C,WAAW,YAAY,sBAAsB,kBAAkB,CAC3G,AACD,+CAA+C,WAAW,WAAW,CACpE,AACD,+DAA+D,aAAa,aAAa,CACxF,AACD,iFAAiF,cAAc,eAAe,eAAe,CAC5H,AACD,4DAA4D,mBAAoB,CAC/E,AACD,0DAA0D,SAAS,CAClE",file:"positions.vue",sourcesContent:["\n.project-top[data-v-e94d13aa]{margin-bottom:20px;margin-top:20px\n}\n.avatar-uploader .el-upload[data-v-e94d13aa]{border:1px dashed #d9d9d9;border-radius:6px;cursor:pointer;position:relative;overflow:hidden\n}\n.avatar-uploader .el-upload[data-v-e94d13aa]:hover{border-color:#409eff\n}\n.avatar-uploader-icon[data-v-e94d13aa]{font-size:28px;color:#8c939d;width:178px;height:178px;line-height:178px;text-align:center\n}\n.avatar[data-v-e94d13aa]{width:100%;height:230px;display:block\n}\n.el-radio-group .el-radio+.el-radio[data-v-e94d13aa]{margin-left:0 !important\n}\n.pages[data-v-e94d13aa]{margin-top:0 !important;margin-bottom:80px !important\n}\n.el-breadcrumb[data-v-e94d13aa]{z-index:10 !important\n}\n.el-carousel__item h3[data-v-e94d13aa]{color:#475669;font-size:18px;opacity:.75;line-height:300px;margin:0\n}\n.el-carousel__item[data-v-e94d13aa]:nth-child(2n){background-color:#99a9bf\n}\n.el-carousel__item[data-v-e94d13aa]:nth-child(2n+1){background-color:#d3dce6\n}\n::v-deep .preview-class img[data-v-e94d13aa]{width:100%;height:100%;-o-object-fit:contain;object-fit:contain\n}\n::v-deep .preview-class video[data-v-e94d13aa]{width:100%;height:70vh\n}\n::v-deep .preview-class .el-dialog__headerbtn[data-v-e94d13aa]{z-index:1000;color:#030303\n}\n::v-deep .preview-class .el-dialog__headerbtn .el-dialog__close[data-v-e94d13aa]{color:#030303;font-size:20px;font-weight:900\n}\n::v-deep .preview-class .el-dialog__header[data-v-e94d13aa]{padding:0 !important\n}\n::v-deep .preview-class .el-dialog__body[data-v-e94d13aa]{padding:0\n}"],sourceRoot:""}])},NL1e:function(e,t,a){"use strict";function n(e){a("3eyQ")}Object.defineProperty(t,"__esModule",{value:!0});var i=a("uh9Q"),o=a("rzAt"),r=a("VU/8"),s=n,l=r(i.a,o.a,!1,s,"data-v-e94d13aa",null);t.default=l.exports},TZN5:function(e,t,a){t=e.exports=a("FZ+f")(!0),t.push([e.i,".pagination[data-v-385880eb]{float:right}","",{version:3,sources:["/Users/qinlh/www/Swanlake/public/AdminServer/src/components/Page.vue"],names:[],mappings:"AACA,6BACE,WAAa,CACd",file:"Page.vue",sourcesContent:["\n.pagination[data-v-385880eb]{\n  float: right;\n}\n"],sourceRoot:""}])},"c/Tr":function(e,t,a){e.exports={default:a("5zde"),__esModule:!0}},fBQ2:function(e,t,a){"use strict";var n=a("evD5"),i=a("X8DO");e.exports=function(e,t,a){t in e?n.f(e,t,i(0,a)):e[t]=a}},k2Ib:function(e,t,a){a("30KW"),e.exports=a("FeBl").Number.isFinite},kQ9O:function(e,t,a){var n=a("TZN5");"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);a("rjj0")("6a9f0435",n,!0,{})},pMNZ:function(e,t,a){"use strict";function n(e){a("kQ9O")}var i=a("AO5d"),o=a("Eqnc"),r=a("VU/8"),s=n,l=r(i.a,o.a,!1,s,"data-v-385880eb",null);t.a=l.exports},qyJz:function(e,t,a){"use strict";var n=a("+ZMJ"),i=a("kM2E"),o=a("sB3e"),r=a("msXi"),s=a("Mhyx"),l=a("QRG4"),c=a("fBQ2"),d=a("3fs2");i(i.S+i.F*!a("dY0y")(function(e){Array.from(e)}),"Array",{from:function(e){var t,a,i,u,p=o(e),g="function"==typeof this?this:Array,v=arguments.length,h=v>1?arguments[1]:void 0,f=void 0!==h,A=0,_=d(p);if(f&&(h=n(h,v>2?arguments[2]:void 0,2)),void 0==_||g==Array&&s(_))for(t=l(p.length),a=new g(t);t>A;A++)c(a,A,f?h(p[A],A):p[A]);else for(u=_.call(p),a=new g;!(i=u.next()).done;A++)c(a,A,f?r(u,h,[i.value,A],!0):i.value);return a.length=A,a}})},rzAt:function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),a("el-breadcrumb-item",{attrs:{to:""}},[e._v("SIG持仓管理")]),e._v(" "),a("el-breadcrumb-item",{attrs:{to:""}},[e._v("数据统计")])],1),e._v(" "),a("div",{staticClass:"project-top"},[a("el-select",{attrs:{placeholder:"选择要搜索的账户"},on:{change:e.accountChange},model:{value:e.account_id,callback:function(t){e.account_id=t},expression:"account_id"}},e._l(e.accountList,function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.id}})}),1)],1),e._v(" "),a("el-tabs",{attrs:{type:"card"},on:{"tab-click":e.tabClick}},[a("el-tab-pane",{attrs:{label:"当前持仓"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.currentLoading,expression:"currentLoading"}],staticStyle:{width:"100%"},attrs:{data:e.currentPositionsList}},[a("el-table-column",{attrs:{prop:"symbol",label:"交易品种",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"side",label:"持仓方向",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return["long"===t.row.side?a("span",[e._v("开多")]):"short"===t.row.side?a("span",[e._v("开空")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"持仓量",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.contracts)+" 张")]),e._v(" "),a("br"),e._v(" "),a("span",[e._v(e._s(e.keepDecimalNotRounding(t.row.contracts*t.row.contractSize*t.row.markPrice,2,!0))+" USDT")])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"标记价格",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.keepDecimalNotRounding(t.row.markPrice,2,!0)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"开仓均价",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.keepDecimalNotRounding(t.row.entryPrice,2,!0)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"浮动收益",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.keepDecimalNotRounding(t.row.unrealizedPnl,2,!0)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"维持保证金率",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.keepDecimalNotRounding(100*t.row.maintenanceMarginPercentage,2,!0))+"%")])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"保证金",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.keepDecimalNotRounding(t.row.collateral,2,!0))+" USDT")])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"盈亏平衡价",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.keepDecimalNotRounding(t.row.entryPrice+t.row.unrealizedPnl/t.row.contracts,2,!0))+" USDT")])]}}])})],1)],1),e._v(" "),a("el-tab-pane",{attrs:{label:"历史持仓"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.historyLoading,expression:"historyLoading"}],staticStyle:{width:"100%"},attrs:{data:e.positionsHistoryList}},[a("el-table-column",{attrs:{prop:"symbol",label:"交易品种",align:"left",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.symbol))]),e._v(" "),a("br"),e._v(" "),"cross"===t.row.info.mgnMode?a("span",[e._v("全仓")]):e._e(),e._v(" "),"isolated"===t.row.info.mgnMode?a("span",[e._v("逐仓")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"仓位状态",align:"left"},scopedSlots:e._u([{key:"default",fn:function(t){return["1"===t.row.info.type?a("span",{staticStyle:{color:"#05C48E"}},[e._v("部分平仓")]):"2"===t.row.info.type?a("span",{staticStyle:{color:"#df473d"}},[e._v("完全平仓")]):"3"===t.row.info.type?a("span",{staticStyle:{color:"#df473d"}},[e._v("强平")]):"4"===t.row.info.type?a("span",{staticStyle:{color:"#df473d"}},[e._v("强减")]):"5"===t.row.info.type?a("span",{staticStyle:{color:"#df473d"}},[e._v("ADL自动减仓")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"side",label:"交易方向",align:"left"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.info?a("div",["long"===t.row.info.direction&&"long"===t.row.info.posSide?a("span",{staticStyle:{color:"#05C48E"}},[e._v("买入开多")]):"long"===t.row.info.direction&&"short"===t.row.info.posSide?a("span",{staticStyle:{color:"#05C48E"}},[e._v("买入平空")]):"short"===t.row.info.direction&&"long"===t.row.info.posSide?a("span",{staticStyle:{color:"#df473d"}},[e._v("卖出平多")]):"short"===t.row.info.direction&&"short"===t.row.info.posSide?a("span",{staticStyle:{color:"#df473d"}},[e._v("卖出开空")]):a("span",{staticStyle:{color:"#df473d"}},[e._v("卖出")])]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"开仓均价 | 平仓均价 USDT",align:"left",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.keepDecimalNotRounding(t.row.entryPrice,2,!0)))]),e._v(" "),a("br"),e._v(" "),a("span",[e._v(e._s(e.keepDecimalNotRounding(t.row.lastPrice,2,!0)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"收益 USDT | 收益率",align:"left",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticStyle:{color:"#25a750"}},[e._v("\n                "+e._s(e.keepDecimalNotRounding(t.row.realizedPnl,2,!0))+"\n                "),a("br"),e._v("\n                "+e._s(e.keepDecimalNotRounding(t.row.realizedPnl/(t.row.contractSize*t.row.entryPrice)*100,2,!0))+"%\n              ")])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"最大持仓量 | 已平仓量",align:"left"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.info.openMaxPos)+" 张")]),e._v(" "),a("br"),e._v(" "),a("span",[e._v(e._s(t.row.info.closeTotalPos)+" 张")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"hedged",label:"利润(USDT)",align:"left",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return["long"===t.row.info.posSide?a("span",[e._v(e._s(e.keepDecimalNotRounding(t.row.lastPrice-t.row.entryPrice,2,!0)))]):"short"===t.row.info.posSide?a("span",[e._v(e._s(e.keepDecimalNotRounding(t.row.entryPrice-t.row.lastPrice,2,!0)))]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"open_time",label:"开仓时间",align:"left",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.timestampToTime(t.row.info.cTime)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"close_time",label:"平仓时间",align:"left",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.timestampToTime(t.row.info.uTime)))])]}}])})],1),e._v(" "),a("el-row",{staticClass:"pages"},[a("el-col",{attrs:{span:24}},[a("div",{staticStyle:{float:"right"}},[a("wbc-page",{attrs:{total:e.total,pageSize:e.pageSize,currPage:e.currPage},on:{changeLimit:e.limitPaging,changeSkip:e.skipPaging}})],1)])],1)],1)],1)],1)},i=[],o={render:n,staticRenderFns:i};t.a=o},uh9Q:function(e,t,a){"use strict";var n=a("Gu7T"),i=a.n(n),o=a("AMV0"),r=a.n(o),s=a("pFYg"),l=a.n(s),c=a("pMNZ"),d=a("+zHA");t.a={data:function(){return{account_id:1,inst_id:"BTC-USDT-SWAP",currPage:1,pageSize:100,total:100,PageSearchWhere:[],positionsHistoryList:[],historyLoading:!1,currentPositionsList:[],currentLoading:!1,accountList:[],balanceCacheTTL:6e4,balanceCache:{}}},methods:{loadBalanceCache:function(){try{var e=localStorage.getItem("GRID_ACCOUNT_BALANCE_CACHE");this.balanceCache=e?JSON.parse(e):{}}catch(e){this.balanceCache={}}},getCachedBalance:function(e){var t=String(e),a=Number(e),n=this.balanceCache[t]||this.balanceCache[e]||this.balanceCache[a];if(!n||"object"!==(void 0===n?"undefined":l()(n)))return null;if(Date.now()-n.ts>this.balanceCacheTTL)return null;var i=Number(n.balance);return r()(i)?i:null},sortAccountListByBalance:function(e){var t=this,a=Array.isArray(e)?e:[];return[].concat(i()(a)).sort(function(e,a){var n=t.getCachedBalance(e.id),i=t.getCachedBalance(a.id),o=null!==n;return o!==(null!==i)?o?-1:1:(i||0)-(n||0)})},tabClick:function(e){console.log(e)},accountChange:function(e){e&&(this.getCurrentPositionsListData(),this.getPositionsHistoryListData())},getCurrentPositionsListData:function(e){var t=this,a=this.$data;this.currentLoading=!0,(!e||void 0==e||e.length<=0)&&(e={account_id:a.account_id,inst_id:a.inst_id}),Object(d.b)("/sigadmin/get_current_positions",{account_id:a.account_id,inst_id:a.inst_id},function(e){t.currentLoading=!1,200==e.status?t.currentPositionsList=e.data.data:t.$message.error("加载数据失败")})},getPositionsHistoryListData:function(e){var t=this,a=this.$data;this.historyLoading=!0,(!e||void 0==e||e.length<=0)&&(e={account_id:a.account_id,limit:a.pageSize,page:a.currPage}),Object(d.b)("/sigadmin/get_positions_history",{account_id:a.account_id,inst_id:a.inst_id,limit:a.pageSize},function(e){t.historyLoading=!1,200==e.status?t.positionsHistoryList=e.data.data:t.$message.error("加载数据失败")})},SearchClick:function(){var e={page:this.currPage,limit:this.pageSize};this.PageSearchWhere=[],this.PageSearchWhere=e,this.getPositionsHistoryListData(e)},SearchReset:function(){this.PageSearchWhere=[],this.getPositionsHistoryListData()},limitPaging:function(e){this.pageSize=e,this.PageSearchWhere.limit&&void 0!==this.PageSearchWhere.limit&&(this.PageSearchWhere.limit=e),this.getListData(this.PageSearchWhere)},skipPaging:function(e){this.currPage=e,this.PageSearchWhere.page&&void 0!==this.PageSearchWhere.page&&(this.PageSearchWhere.page=e),this.getListData(this.PageSearchWhere)},handleClose:function(){this.dialogVisibleShow=!1},formatDate:function(e){return e?new Date(e).toISOString().replace("T"," ").substring(0,19):""},timestampToTime:function(e){var t=Number(e);if(!t||isNaN(t))return"Invalid timestamp";var a=new Date(t);return isNaN(a.getTime())?"Invalid Date":new Intl.DateTimeFormat("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}).format(a).replace(/\//g,"-")},getAccountList:function(){var e=this;Object(d.b)("/Grid/grid/getAccountList",{},function(t){1e4==t.data.code?e.accountList=e.sortAccountListByBalance(t.data.data):e.$message.error("加载账户数据失败")})}},created:function(){this.loadBalanceCache(),this.getAccountList(),this.getCurrentPositionsListData(),this.getPositionsHistoryListData()},components:{"wbc-page":c.a}}}});
//# sourceMappingURL=2.js.map?v=1770887086547