webpackJsonp([1],{"30KW":function(e,a,t){var n=t("kM2E"),r=t("7KvD").isFinite;n(n.S,"Number",{isFinite:function(e){return"number"==typeof e&&r(e)}})},"5ZVj":function(e,a,t){"use strict";var n=t("Dd8w"),r=t.n(n),o=t("Gu7T"),i=t.n(o),c=t("AMV0"),s=t.n(c),l=t("pFYg"),d=t.n(l),u=t("mvHQ"),A=t.n(u),p=t("pMNZ"),f=t("+zHA");a.a={data:function(){return{currPage:1,pageSize:10,total:0,accountList:[],inst_id:"BTC-USDT-SWAP",PageSearchWhere:{},loading:!1,addQuantityAccountShow:!1,accountForm:{name:"",api_key:"",secret_key:"",pass_phrase:"",exchange:"okx",is_position:"0"},accountRules:{name:[{required:!0,message:"请输入账户名称",trigger:"blur"}],api_key:[{required:!0,message:"请输入APIKey",trigger:"blur"}],secret_key:[{required:!0,message:"请输入SecretKey",trigger:"blur"}],pass_phrase:[{required:!0,message:"请输入Passphrase",trigger:"blur"}],exchange:[{required:!0,message:"请选择网络",trigger:"change"}],is_position:[{required:!0,message:"请选择是否持仓",trigger:"change"}]},balanceSortTimer:null,balanceRequestVersion:0,balanceConcurrency:5,balanceCacheTTL:6e4,balanceCache:{}}},created:function(){this.loadBalanceCache(),this.getAccountList()},components:{"wbc-page":p.a},methods:{loadBalanceCache:function(){try{var e=localStorage.getItem("GRID_ACCOUNT_BALANCE_CACHE");this.balanceCache=e?JSON.parse(e):{}}catch(e){this.balanceCache={}}},saveBalanceCache:function(){try{localStorage.setItem("GRID_ACCOUNT_BALANCE_CACHE",A()(this.balanceCache))}catch(e){}},getCachedBalance:function(e){var a=String(e),t=this.balanceCache[a]||this.balanceCache[e];if(!t||"object"!==(void 0===t?"undefined":d()(t)))return null;if(Date.now()-t.ts>this.balanceCacheTTL)return null;var n=Number(t.balance);return s()(n)?n:null},setCachedBalance:function(e,a){var t=Number(a);s()(t)&&(this.$set(this.balanceCache,String(e),{balance:t,ts:Date.now()}),this.saveBalanceCache())},parseBalanceValue:function(e){var a=Number(e);return s()(a)?a:0},sortAccountListByBalance:function(){var e=this;this.accountList=[].concat(i()(this.accountList)).sort(function(a,t){return a.balanceLoading!==t.balanceLoading?a.balanceLoading?1:-1:e.parseBalanceValue(t.balance)-e.parseBalanceValue(a.balance)})},scheduleSortAccountListByBalance:function(){var e=this;this.balanceSortTimer&&clearTimeout(this.balanceSortTimer),this.balanceSortTimer=setTimeout(function(){e.sortAccountListByBalance()},300)},limitPaging:function(e){this.pageSize=e,this.PageSearchWhere.limit&&void 0!==this.PageSearchWhere.limit&&(this.PageSearchWhere.limit=e),this.getAccountList(this.PageSearchWhere)},skipPaging:function(e){this.currPage=e,this.PageSearchWhere.page&&void 0!==this.PageSearchWhere.page&&(this.PageSearchWhere.page=e),this.getAccountList(this.PageSearchWhere)},getAccountList:function(){var e=this;this.loading=!0,Object(f.b)("/Grid/grid/getAccountList",{},function(a){1e4==a.data.code?(e.loading=!1,e.accountList=a.data.data.map(function(a){var t=e.getCachedBalance(a.id);return r()({},a,{balance:null!==t?t:"--",balanceLoading:null===t})}),e.sortAccountListByBalance(),e.total=a.data.data.count,e.fetchAccountBalances()):(e.loading=!1,e.$message.error("加载账户数据失败"))})},fetchAccountBalances:function(){var e=this,a=++this.balanceRequestVersion,t=[].concat(i()(this.accountList)),n=Math.min(this.balanceConcurrency,t.length);if(n)for(var r=0;r<n;r++)!function n(){if(a===e.balanceRequestVersion){var r=t.shift();r&&Object(f.b)("/sigadmin/get_account_over",{account_id:r.id,inst_id:e.inst_id},function(t){if(a===e.balanceRequestVersion){console.log(t);var o=t&&t.data&&t.data.data&&t.data.data.data?t.data.data.data.trading_balance:null;200==t.status&&void 0!==o&&null!==o?(r.balance=e.parseBalanceValue(o),r.balanceLoading=!1,e.setCachedBalance(r.id,r.balance)):(r.balance="--"===r.balance?0:e.parseBalanceValue(r.balance),r.balanceLoading=!1),e.scheduleSortAccountListByBalance(),n()}})}}()},addQuantityAccount:function(){this.addQuantityAccountShow=!0},addAccountSubmitForm:function(e){var a=this;this.$refs[e].validate(function(t){if(!t)return console.log("error submit!!"),!1;var n=a.$loading({target:".el-dialog"});Object(f.c)("/Grid/Quantifyaccount/addQuantityAccount",a.accountForm,function(t){console.log(t),t&&1e4==t.data.code?(a.$message.success("添加成功"),a.addQuantityAccountShow=!1,a.$refs[e].resetFields(),n.close(),a.dialogVisibleShow=!1,a.getAccountList()):(n.close(),a.addQuantityAccountShow=!1,a.$message.error(t.data.msg))})})},DelData:function(e){var a=this;this.$confirm("此操作将永久删除该数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(f.b)("/Grid/Quantifyaccount/deleteQuantityAccount",{account_id:e.id},function(e){e&&1e4==e.data.code?(a.getAccountList(),a.$message({type:"success",message:"删除成功!"})):(e.data.code,a.$message.error(e.data.msg))})}).catch(function(){a.$message({type:"info",message:"已取消删除"})})}},beforeDestroy:function(){this.balanceSortTimer&&(clearTimeout(this.balanceSortTimer),this.balanceSortTimer=null)}}},"5zde":function(e,a,t){t("zQR9"),t("qyJz"),e.exports=t("FeBl").Array.from},AMV0:function(e,a,t){e.exports={default:t("k2Ib"),__esModule:!0}},AO5d:function(e,a,t){"use strict";a.a={props:["total","pageSize","currPage"],data:function(){return{}},methods:{handleSizeChange:function(e){this.$emit("changeLimit",e)},handleCurrentChange:function(e){this.$emit("changeSkip",e)}}}},Eqnc:function(e,a,t){"use strict";var n=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("nav",[t("div",{staticClass:"grid-content"},[t("div",{staticClass:"pagination"},[t("el-pagination",{attrs:{"current-page":e.currPage,"page-sizes":[10,20,30,50,100],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)])])},r=[],o={render:n,staticRenderFns:r};a.a=o},Gu7T:function(e,a,t){"use strict";a.__esModule=!0;var n=t("c/Tr"),r=function(e){return e&&e.__esModule?e:{default:e}}(n);a.default=function(e){if(Array.isArray(e)){for(var a=0,t=Array(e.length);a<e.length;a++)t[a]=e[a];return t}return(0,r.default)(e)}},Re2X:function(e,a,t){"use strict";function n(e){t("xqT1")}Object.defineProperty(a,"__esModule",{value:!0});var r=t("5ZVj"),o=t("xS8S"),i=t("VU/8"),c=n,s=i(r.a,o.a,!1,c,"data-v-e930edf8",null);a.default=s.exports},Ssxr:function(e,a,t){a=e.exports=t("FZ+f")(!0),a.push([e.i,'.project-top[data-v-e930edf8]{margin-bottom:20px;margin-top:20px}.avatar-uploader .el-upload[data-v-e930edf8]{border:1px dashed #d9d9d9;border-radius:6px;cursor:pointer;position:relative;overflow:hidden}.avatar-uploader .el-upload[data-v-e930edf8]:hover{border-color:#409eff}.avatar-uploader-icon[data-v-e930edf8]{font-size:28px;color:#8c939d;width:178px;height:178px;line-height:178px;text-align:center}.avatar[data-v-e930edf8]{width:100%;height:230px;display:block}.el-radio-group .el-radio+.el-radio[data-v-e930edf8]{margin-left:0!important}.pages[data-v-e930edf8]{margin-top:0!important;margin-bottom:80px!important}.el-breadcrumb[data-v-e930edf8]{z-index:10!important}.el-carousel__item h3[data-v-e930edf8]{color:#475669;font-size:18px;opacity:.75;line-height:300px;margin:0}.el-carousel__item[data-v-e930edf8]:nth-child(2n){background-color:#99a9bf}.el-carousel__item[data-v-e930edf8]:nth-child(odd){background-color:#d3dce6}.balance-container[data-v-e930edf8]{position:relative;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.loading[data-v-e930edf8]{display:contents;top:50%;left:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);font-size:14px}.loading[data-v-e930edf8]:after{content:" ";display:block;width:16px;height:16px;border:2px solid #606266;border-top-color:transparent;border-radius:50%;-webkit-animation:loading-data-v-e930edf8 1s linear infinite;animation:loading-data-v-e930edf8 1s linear infinite}@-webkit-keyframes loading-data-v-e930edf8{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}@keyframes loading-data-v-e930edf8{0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)}to{-webkit-transform:rotate(1turn);transform:rotate(1turn)}}',"",{version:3,sources:["/Users/qinlh/www/Swanlake/public/AdminServer/src/pages/Grid/accounts.vue"],names:[],mappings:"AACA,8BAA8B,mBAAmB,eAAe,CAC/D,AACD,6CAA6C,0BAA0B,kBAAkB,eAAe,kBAAkB,eAAe,CACxI,AACD,mDAAmD,oBAAoB,CACtE,AACD,uCAAuC,eAAe,cAAc,YAAY,aAAa,kBAAkB,iBAAiB,CAC/H,AACD,yBAAyB,WAAW,aAAa,aAAa,CAC7D,AACD,qDAAqD,uBAAwB,CAC5E,AACD,wBAAwB,uBAAwB,4BAA6B,CAC5E,AACD,gCAAgC,oBAAqB,CACpD,AACD,uCAAuC,cAAc,eAAe,YAAY,kBAAkB,QAAQ,CACzG,AACD,kDAAkD,wBAAwB,CACzE,AACD,mDAAoD,wBAAwB,CAC3E,AACD,oCAAoC,kBAAkB,oBAAoB,oBAAoB,aAAa,wBAAwB,qBAAqB,uBAAuB,yBAAyB,sBAAsB,kBAAkB,CAC/O,AACD,0BAA0B,iBAAiB,QAAQ,SAAS,uCAAwC,+BAAgC,cAAc,CACjJ,AACD,gCAAiC,YAAY,cAAc,WAAW,YAAY,yBAAyB,6BAA+B,kBAAkB,6DAA6D,oDAAoD,CAC5Q,AACD,2CACA,GAAG,+BAA+B,sBAAsB,CACvD,AACD,GAAK,gCAAiC,uBAAwB,CAC7D,CACA,AACD,mCACA,GAAG,+BAA+B,sBAAsB,CACvD,AACD,GAAK,gCAAiC,uBAAwB,CAC7D,CACA",file:"accounts.vue",sourcesContent:['\n.project-top[data-v-e930edf8]{margin-bottom:20px;margin-top:20px\n}\n.avatar-uploader .el-upload[data-v-e930edf8]{border:1px dashed #d9d9d9;border-radius:6px;cursor:pointer;position:relative;overflow:hidden\n}\n.avatar-uploader .el-upload[data-v-e930edf8]:hover{border-color:#409eff\n}\n.avatar-uploader-icon[data-v-e930edf8]{font-size:28px;color:#8c939d;width:178px;height:178px;line-height:178px;text-align:center\n}\n.avatar[data-v-e930edf8]{width:100%;height:230px;display:block\n}\n.el-radio-group .el-radio+.el-radio[data-v-e930edf8]{margin-left:0 !important\n}\n.pages[data-v-e930edf8]{margin-top:0 !important;margin-bottom:80px !important\n}\n.el-breadcrumb[data-v-e930edf8]{z-index:10 !important\n}\n.el-carousel__item h3[data-v-e930edf8]{color:#475669;font-size:18px;opacity:.75;line-height:300px;margin:0\n}\n.el-carousel__item[data-v-e930edf8]:nth-child(2n){background-color:#99a9bf\n}\n.el-carousel__item[data-v-e930edf8]:nth-child(2n+1){background-color:#d3dce6\n}\n.balance-container[data-v-e930edf8]{position:relative;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center\n}\n.loading[data-v-e930edf8]{display:contents;top:50%;left:50%;-webkit-transform:translate(-50%, -50%);transform:translate(-50%, -50%);font-size:14px\n}\n.loading[data-v-e930edf8]::after{content:" ";display:block;width:16px;height:16px;border:2px solid #606266;border-top-color:rgba(0,0,0,0);border-radius:50%;-webkit-animation:loading-data-v-e930edf8 1s linear infinite;animation:loading-data-v-e930edf8 1s linear infinite\n}\n@-webkit-keyframes loading-data-v-e930edf8{\n0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)\n}\n100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)\n}\n}\n@keyframes loading-data-v-e930edf8{\n0%{-webkit-transform:rotate(0deg);transform:rotate(0deg)\n}\n100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)\n}\n}'],sourceRoot:""}])},TZN5:function(e,a,t){a=e.exports=t("FZ+f")(!0),a.push([e.i,".pagination[data-v-385880eb]{float:right}","",{version:3,sources:["/Users/qinlh/www/Swanlake/public/AdminServer/src/components/Page.vue"],names:[],mappings:"AACA,6BACE,WAAa,CACd",file:"Page.vue",sourcesContent:["\n.pagination[data-v-385880eb]{\n  float: right;\n}\n"],sourceRoot:""}])},"c/Tr":function(e,a,t){e.exports={default:t("5zde"),__esModule:!0}},fBQ2:function(e,a,t){"use strict";var n=t("evD5"),r=t("X8DO");e.exports=function(e,a,t){a in e?n.f(e,a,r(0,t)):e[a]=t}},k2Ib:function(e,a,t){t("30KW"),e.exports=t("FeBl").Number.isFinite},kQ9O:function(e,a,t){var n=t("TZN5");"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);t("rjj0")("6a9f0435",n,!0,{})},mvHQ:function(e,a,t){e.exports={default:t("qkKv"),__esModule:!0}},pMNZ:function(e,a,t){"use strict";function n(e){t("kQ9O")}var r=t("AO5d"),o=t("Eqnc"),i=t("VU/8"),c=n,s=i(r.a,o.a,!1,c,"data-v-385880eb",null);a.a=s.exports},qkKv:function(e,a,t){var n=t("FeBl"),r=n.JSON||(n.JSON={stringify:JSON.stringify});e.exports=function(e){return r.stringify.apply(r,arguments)}},qyJz:function(e,a,t){"use strict";var n=t("+ZMJ"),r=t("kM2E"),o=t("sB3e"),i=t("msXi"),c=t("Mhyx"),s=t("QRG4"),l=t("fBQ2"),d=t("3fs2");r(r.S+r.F*!t("dY0y")(function(e){Array.from(e)}),"Array",{from:function(e){var a,t,r,u,A=o(e),p="function"==typeof this?this:Array,f=arguments.length,g=f>1?arguments[1]:void 0,m=void 0!==g,h=0,b=d(A);if(m&&(g=n(g,f>2?arguments[2]:void 0,2)),void 0==b||p==Array&&c(b))for(a=s(A.length),t=new p(a);a>h;h++)l(t,h,m?g(A[h],h):A[h]);else for(u=b.call(A),t=new p;!(r=u.next()).done;h++)l(t,h,m?i(u,g,[r.value,h],!0):r.value);return t.length=h,t}})},xS8S:function(e,a,t){"use strict";var n=function(){var e=this,a=e.$createElement,t=e._self._c||a;return t("div",[t("el-breadcrumb",{attrs:{separator:"/"}},[t("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),t("el-breadcrumb-item",[e._v("账户列表")])],1),e._v(" "),t("div",{staticStyle:{"text-align":"right","margin-bottom":"10px"}},[t("el-button",{attrs:{type:"primary"},on:{click:function(a){return e.addQuantityAccount()}}},[e._v("添加账户")])],1),e._v(" "),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%","margin-top":"20px"},attrs:{data:e.accountList}},[t("el-table-column",{attrs:{prop:"name",label:"账户名称",align:"center"}}),e._v(" "),t("el-table-column",{attrs:{prop:"exchange",label:"网络",align:"center"}}),e._v(" "),t("el-table-column",{attrs:{prop:"api_key",label:"API Key",align:"center"}}),e._v(" "),t("el-table-column",{attrs:{prop:"api_secret",label:"API Secret",align:"center"}}),e._v(" "),t("el-table-column",{attrs:{prop:"api_passphrase",label:"API Passphrase",align:"center"}}),e._v(" "),t("el-table-column",{attrs:{prop:"add_time",label:"添加时间",align:"center"}}),e._v(" "),t("el-table-column",{attrs:{prop:"balance",label:"账户余额",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("div",{staticClass:"balance-container"},[a.row.balanceLoading?t("span",{staticStyle:{display:"contents"}},[t("span",{staticClass:"loading"}),e._v("  USDT")]):t("span",[e._v(e._s(e.keepDecimalNotRounding(a.row.balance,2))+" USDT")])])]}}])}),e._v(" "),t("el-table-column",{attrs:{prop:"balance",label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{type:"text"},on:{click:function(t){return e.DelData(a.row)}}},[e._v("删除")])]}}])})],1),e._v(" "),t("el-row",{staticClass:"pages"},[t("el-col",{attrs:{span:24}},[t("div",{staticStyle:{float:"right"}},[t("wbc-page",{attrs:{total:e.total,pageSize:e.pageSize,currPage:e.currPage},on:{changeLimit:e.limitPaging,changeSkip:e.skipPaging}})],1)])],1),e._v(" "),t("el-dialog",{attrs:{title:"添加账户",visible:e.addQuantityAccountShow,width:"50%"},on:{"update:visible":function(a){e.addQuantityAccountShow=a}}},[t("el-form",{ref:"accountForm",attrs:{model:e.accountForm,rules:e.accountRules,"label-width":"120px"}},[t("el-form-item",{attrs:{label:"账户名称",prop:"name"}},[t("el-input",{model:{value:e.accountForm.name,callback:function(a){e.$set(e.accountForm,"name",a)},expression:"accountForm.name"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"APIKey",prop:"api_key"}},[t("el-input",{model:{value:e.accountForm.api_key,callback:function(a){e.$set(e.accountForm,"api_key",a)},expression:"accountForm.api_key"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"SecretKey",prop:"secret_key"}},[t("el-input",{model:{value:e.accountForm.secret_key,callback:function(a){e.$set(e.accountForm,"secret_key",a)},expression:"accountForm.secret_key"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"Passphrase",prop:"pass_phrase"}},[t("el-input",{model:{value:e.accountForm.pass_phrase,callback:function(a){e.$set(e.accountForm,"pass_phrase",a)},expression:"accountForm.pass_phrase"}})],1),e._v(" "),t("el-form-item",{attrs:{label:"网络",prop:"exchange"}},[t("el-radio-group",{model:{value:e.accountForm.exchange,callback:function(a){e.$set(e.accountForm,"exchange",a)},expression:"accountForm.exchange"}},[t("el-radio",{attrs:{label:"okx"}},[e._v("OKX")])],1)],1)],1),e._v(" "),t("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[t("el-button",{on:{click:function(a){e.addQuantityAccountShow=!1}}},[e._v("取 消")]),e._v(" "),t("el-button",{attrs:{type:"primary"},on:{click:function(a){return e.addAccountSubmitForm("accountForm")}}},[e._v("确 定")])],1)],1)],1)},r=[],o={render:n,staticRenderFns:r};a.a=o},xqT1:function(e,a,t){var n=t("Ssxr");"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);t("rjj0")("0a7bc3a6",n,!0,{})}});
//# sourceMappingURL=1.js.map?v=1770887086547