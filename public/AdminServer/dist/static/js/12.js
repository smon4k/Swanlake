webpackJsonp([12],{"3NVf":function(e,t,a){t=e.exports=a("FZ+f")(!0),t.push([e.i,".project-top[data-v-5c9ef689]{margin-bottom:20px;margin-top:20px}.avatar-uploader .el-upload[data-v-5c9ef689]{border:1px dashed #d9d9d9;border-radius:6px;cursor:pointer;position:relative;overflow:hidden}.avatar-uploader .el-upload[data-v-5c9ef689]:hover{border-color:#409eff}.avatar-uploader-icon[data-v-5c9ef689]{font-size:28px;color:#8c939d;width:178px;height:178px;line-height:178px;text-align:center}.avatar[data-v-5c9ef689]{width:100%;height:230px;display:block}.el-radio-group .el-radio+.el-radio[data-v-5c9ef689]{margin-left:0!important}.pages[data-v-5c9ef689]{margin-top:0!important;margin-bottom:80px!important}.el-breadcrumb[data-v-5c9ef689]{z-index:10!important}.el-carousel__item h3[data-v-5c9ef689]{color:#475669;font-size:18px;opacity:.75;line-height:300px;margin:0}.el-carousel__item[data-v-5c9ef689]:nth-child(2n){background-color:#99a9bf}.el-carousel__item[data-v-5c9ef689]:nth-child(odd){background-color:#d3dce6}::v-deep .preview-class img[data-v-5c9ef689]{width:100%;height:100%;-o-object-fit:contain;object-fit:contain}::v-deep .preview-class video[data-v-5c9ef689]{width:100%;height:70vh}::v-deep .preview-class .el-dialog__headerbtn[data-v-5c9ef689]{z-index:1000;color:#030303}::v-deep .preview-class .el-dialog__headerbtn .el-dialog__close[data-v-5c9ef689]{color:#030303;font-size:20px;font-weight:900}::v-deep .preview-class .el-dialog__header[data-v-5c9ef689]{padding:0!important}::v-deep .preview-class .el-dialog__body[data-v-5c9ef689]{padding:0}","",{version:3,sources:["/Users/qinlh/www/Swanlake/public/AdminServer/src/pages/Grid/positions.vue"],names:[],mappings:"AACA,8BAA8B,mBAAmB,eAAe,CAC/D,AACD,6CAA6C,0BAA0B,kBAAkB,eAAe,kBAAkB,eAAe,CACxI,AACD,mDAAmD,oBAAoB,CACtE,AACD,uCAAuC,eAAe,cAAc,YAAY,aAAa,kBAAkB,iBAAiB,CAC/H,AACD,yBAAyB,WAAW,aAAa,aAAa,CAC7D,AACD,qDAAqD,uBAAwB,CAC5E,AACD,wBAAwB,uBAAwB,4BAA6B,CAC5E,AACD,gCAAgC,oBAAqB,CACpD,AACD,uCAAuC,cAAc,eAAe,YAAY,kBAAkB,QAAQ,CACzG,AACD,kDAAkD,wBAAwB,CACzE,AACD,mDAAoD,wBAAwB,CAC3E,AACD,6CAA6C,WAAW,YAAY,sBAAsB,kBAAkB,CAC3G,AACD,+CAA+C,WAAW,WAAW,CACpE,AACD,+DAA+D,aAAa,aAAa,CACxF,AACD,iFAAiF,cAAc,eAAe,eAAe,CAC5H,AACD,4DAA4D,mBAAoB,CAC/E,AACD,0DAA0D,SAAS,CAClE",file:"positions.vue",sourcesContent:["\n.project-top[data-v-5c9ef689]{margin-bottom:20px;margin-top:20px\n}\n.avatar-uploader .el-upload[data-v-5c9ef689]{border:1px dashed #d9d9d9;border-radius:6px;cursor:pointer;position:relative;overflow:hidden\n}\n.avatar-uploader .el-upload[data-v-5c9ef689]:hover{border-color:#409eff\n}\n.avatar-uploader-icon[data-v-5c9ef689]{font-size:28px;color:#8c939d;width:178px;height:178px;line-height:178px;text-align:center\n}\n.avatar[data-v-5c9ef689]{width:100%;height:230px;display:block\n}\n.el-radio-group .el-radio+.el-radio[data-v-5c9ef689]{margin-left:0 !important\n}\n.pages[data-v-5c9ef689]{margin-top:0 !important;margin-bottom:80px !important\n}\n.el-breadcrumb[data-v-5c9ef689]{z-index:10 !important\n}\n.el-carousel__item h3[data-v-5c9ef689]{color:#475669;font-size:18px;opacity:.75;line-height:300px;margin:0\n}\n.el-carousel__item[data-v-5c9ef689]:nth-child(2n){background-color:#99a9bf\n}\n.el-carousel__item[data-v-5c9ef689]:nth-child(2n+1){background-color:#d3dce6\n}\n::v-deep .preview-class img[data-v-5c9ef689]{width:100%;height:100%;-o-object-fit:contain;object-fit:contain\n}\n::v-deep .preview-class video[data-v-5c9ef689]{width:100%;height:70vh\n}\n::v-deep .preview-class .el-dialog__headerbtn[data-v-5c9ef689]{z-index:1000;color:#030303\n}\n::v-deep .preview-class .el-dialog__headerbtn .el-dialog__close[data-v-5c9ef689]{color:#030303;font-size:20px;font-weight:900\n}\n::v-deep .preview-class .el-dialog__header[data-v-5c9ef689]{padding:0 !important\n}\n::v-deep .preview-class .el-dialog__body[data-v-5c9ef689]{padding:0\n}"],sourceRoot:""}])},AO5d:function(e,t,a){"use strict";t.a={props:["total","pageSize","currPage"],data:function(){return{}},methods:{handleSizeChange:function(e){this.$emit("changeLimit",e)},handleCurrentChange:function(e){this.$emit("changeSkip",e)}}}},Eqnc:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("nav",[a("div",{staticClass:"grid-content"},[a("div",{staticClass:"pagination"},[a("el-pagination",{attrs:{"current-page":e.currPage,"page-sizes":[10,20,30,50,100],"page-size":e.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)])])},n=[],o={render:i,staticRenderFns:n};t.a=o},NL1e:function(e,t,a){"use strict";function i(e){a("wR5p")}Object.defineProperty(t,"__esModule",{value:!0});var n=a("uh9Q"),o=a("WRJP"),r=a("VU/8"),s=i,l=r(n.a,o.a,!1,s,"data-v-5c9ef689",null);t.default=l.exports},TZN5:function(e,t,a){t=e.exports=a("FZ+f")(!0),t.push([e.i,".pagination[data-v-385880eb]{float:right}","",{version:3,sources:["/Users/qinlh/www/Swanlake/public/AdminServer/src/components/Page.vue"],names:[],mappings:"AACA,6BACE,WAAa,CACd",file:"Page.vue",sourcesContent:["\n.pagination[data-v-385880eb]{\n  float: right;\n}\n"],sourceRoot:""}])},WRJP:function(e,t,a){"use strict";var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-breadcrumb",{attrs:{separator:"/"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[e._v("首页")]),e._v(" "),a("el-breadcrumb-item",{attrs:{to:""}},[e._v("SIG持仓管理")]),e._v(" "),a("el-breadcrumb-item",{attrs:{to:""}},[e._v("数据统计")])],1),e._v(" "),a("div",{staticClass:"project-top"},[a("el-select",{attrs:{placeholder:"选择要搜索的账户"},on:{change:e.accountChange},model:{value:e.account_id,callback:function(t){e.account_id=t},expression:"account_id"}},e._l(e.accountList,function(e,t){return a("el-option",{key:t,attrs:{label:e.name,value:e.id}})}),1)],1),e._v(" "),a("el-tabs",{attrs:{type:"card"},on:{"tab-click":e.tabClick}},[a("el-tab-pane",{attrs:{label:"当前持仓"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.currentLoading,expression:"currentLoading"}],staticStyle:{width:"100%"},attrs:{data:e.currentPositionsList}},[a("el-table-column",{attrs:{prop:"symbol",label:"交易品种",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"side",label:"持仓方向",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return["long"===t.row.side?a("span",[e._v("开多")]):"short"===t.row.side?a("span",[e._v("开空")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"持仓量",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.contracts)+" 张")]),e._v(" "),a("br"),e._v(" "),a("span",[e._v(e._s(e.keepDecimalNotRounding(t.row.contracts*t.row.contractSize*t.row.markPrice,2,!0))+" USDT")])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"标记价格",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.keepDecimalNotRounding(t.row.markPrice,2,!0)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"开仓均价",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.keepDecimalNotRounding(t.row.entryPrice,2,!0)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"浮动收益",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.keepDecimalNotRounding(t.row.unrealizedPnl,2,!0)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"维持保证金率",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.keepDecimalNotRounding(100*t.row.maintenanceMarginPercentage,2,!0))+"%")])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"保证金",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.keepDecimalNotRounding(t.row.collateral,2,!0))+" USDT")])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"盈亏平衡价",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.keepDecimalNotRounding(t.row.entryPrice+t.row.unrealizedPnl/t.row.contracts,2,!0))+" USDT")])]}}])})],1)],1),e._v(" "),a("el-tab-pane",{attrs:{label:"历史持仓"}},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.historyLoading,expression:"historyLoading"}],staticStyle:{width:"100%"},attrs:{data:e.positionsHistoryList}},[a("el-table-column",{attrs:{prop:"symbol",label:"交易品种",align:"left",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.symbol))]),e._v(" "),a("br"),e._v(" "),"cross"===t.row.info.mgnMode?a("span",[e._v("全仓")]):e._e(),e._v(" "),"isolated"===t.row.info.mgnMode?a("span",[e._v("逐仓")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"仓位状态",align:"left"},scopedSlots:e._u([{key:"default",fn:function(t){return["1"===t.row.info.type?a("span",{staticStyle:{color:"#05C48E"}},[e._v("部分平仓")]):"2"===t.row.info.type?a("span",{staticStyle:{color:"#df473d"}},[e._v("完全平仓")]):"3"===t.row.info.type?a("span",{staticStyle:{color:"#df473d"}},[e._v("强平")]):"4"===t.row.info.type?a("span",{staticStyle:{color:"#df473d"}},[e._v("强减")]):"5"===t.row.info.type?a("span",{staticStyle:{color:"#df473d"}},[e._v("ADL自动减仓")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"side",label:"交易方向",align:"left"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.info?a("div",["long"===t.row.info.direction&&"long"===t.row.info.posSide?a("span",{staticStyle:{color:"#05C48E"}},[e._v("买入开多")]):"long"===t.row.info.direction&&"short"===t.row.info.posSide?a("span",{staticStyle:{color:"#05C48E"}},[e._v("买入平空")]):"short"===t.row.info.direction&&"long"===t.row.info.posSide?a("span",{staticStyle:{color:"#df473d"}},[e._v("卖出平多")]):"short"===t.row.info.direction&&"short"===t.row.info.posSide?a("span",{staticStyle:{color:"#df473d"}},[e._v("卖出开空")]):a("span",{staticStyle:{color:"#df473d"}},[e._v("卖出")])]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"开仓均价 | 平仓均价 USDT",align:"left",width:"150"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.keepDecimalNotRounding(t.row.entryPrice,2,!0)))]),e._v(" "),a("br"),e._v(" "),a("span",[e._v(e._s(e.keepDecimalNotRounding(t.row.lastPrice,2,!0)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"收益 USDT | 收益率",align:"left",width:"120"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticStyle:{color:"#25a750"}},[e._v("\n                "+e._s(e.keepDecimalNotRounding(t.row.realizedPnl,2,!0))+"\n                "),a("br"),e._v("\n                "+e._s(e.keepDecimalNotRounding(t.row.realizedPnl/(t.row.contractSize*t.row.entryPrice)*100,2,!0))+"%\n              ")])]}}])}),e._v(" "),a("el-table-column",{attrs:{label:"最大持仓量 | 已平仓量",align:"left"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.info.openMaxPos)+" 张")]),e._v(" "),a("br"),e._v(" "),a("span",[e._v(e._s(t.row.info.closeTotalPos)+" 张")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"hedged",label:"利润(USDT)",align:"left",width:"100"},scopedSlots:e._u([{key:"default",fn:function(t){return["long"===t.row.info.posSide?a("span",[e._v(e._s(e.keepDecimalNotRounding(t.row.lastPrice-t.row.entryPrice,2,!0)))]):"short"===t.row.info.posSide?a("span",[e._v(e._s(e.keepDecimalNotRounding(t.row.entryPrice-t.row.lastPrice,2,!0)))]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"open_time",label:"开仓时间",align:"left",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.timestampToTime(t.row.info.cTime)))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"close_time",label:"平仓时间",align:"left",width:"180"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(e.timestampToTime(t.row.info.uTime)))])]}}])})],1),e._v(" "),a("el-row",{staticClass:"pages"},[a("el-col",{attrs:{span:24}},[a("div",{staticStyle:{float:"right"}},[a("wbc-page",{attrs:{total:e.total,pageSize:e.pageSize,currPage:e.currPage},on:{changeLimit:e.limitPaging,changeSkip:e.skipPaging}})],1)])],1)],1)],1)],1)},n=[],o={render:i,staticRenderFns:n};t.a=o},kQ9O:function(e,t,a){var i=a("TZN5");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);a("rjj0")("6a9f0435",i,!0,{})},pMNZ:function(e,t,a){"use strict";function i(e){a("kQ9O")}var n=a("AO5d"),o=a("Eqnc"),r=a("VU/8"),s=i,l=r(n.a,o.a,!1,s,"data-v-385880eb",null);t.a=l.exports},uh9Q:function(e,t,a){"use strict";var i=a("pMNZ"),n=a("+zHA");t.a={data:function(){return{account_id:1,inst_id:"BTC-USDT-SWAP",currPage:1,pageSize:100,total:100,PageSearchWhere:[],positionsHistoryList:[],historyLoading:!1,currentPositionsList:[],currentLoading:!1,accountList:[]}},methods:{tabClick:function(e){console.log(e)},accountChange:function(e){e&&(this.getCurrentPositionsListData(),this.getPositionsHistoryListData())},getCurrentPositionsListData:function(e){var t=this,a=this.$data;this.currentLoading=!0,(!e||void 0==e||e.length<=0)&&(e={account_id:a.account_id,inst_id:a.inst_id}),Object(n.b)("/sigadmin/get_current_positions",{account_id:a.account_id,inst_id:a.inst_id},function(e){t.currentLoading=!1,200==e.status?t.currentPositionsList=e.data.data:t.$message.error("加载数据失败")})},getPositionsHistoryListData:function(e){var t=this,a=this.$data;this.historyLoading=!0,(!e||void 0==e||e.length<=0)&&(e={account_id:a.account_id,limit:a.pageSize,page:a.currPage}),Object(n.b)("/sigadmin/get_positions_history",{account_id:a.account_id,inst_id:a.inst_id,limit:a.pageSize},function(e){t.historyLoading=!1,200==e.status?t.positionsHistoryList=e.data.data:t.$message.error("加载数据失败")})},SearchClick:function(){var e={page:this.currPage,limit:this.pageSize};this.PageSearchWhere=[],this.PageSearchWhere=e,this.getPositionsHistoryListData(e)},SearchReset:function(){this.PageSearchWhere=[],this.getPositionsHistoryListData()},limitPaging:function(e){this.pageSize=e,this.PageSearchWhere.limit&&void 0!==this.PageSearchWhere.limit&&(this.PageSearchWhere.limit=e),this.getListData(this.PageSearchWhere)},skipPaging:function(e){this.currPage=e,this.PageSearchWhere.page&&void 0!==this.PageSearchWhere.page&&(this.PageSearchWhere.page=e),this.getListData(this.PageSearchWhere)},handleClose:function(){this.dialogVisibleShow=!1},formatDate:function(e){return e?new Date(e).toISOString().replace("T"," ").substring(0,19):""},timestampToTime:function(e){var t=Number(e);if(!t||isNaN(t))return"Invalid timestamp";var a=new Date(t);return isNaN(a.getTime())?"Invalid Date":new Intl.DateTimeFormat("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1}).format(a).replace(/\//g,"-")},getAccountList:function(){var e=this;Object(n.b)("/Grid/grid/getAccountList",{},function(t){if(1e4==t.data.code){var a=Array.isArray(t.data.data)?t.data.data:[];e.accountList=a.sort(function(e,t){var a=Number(e.total_balance)||0;return(Number(t.total_balance)||0)-a})}else e.$message.error("加载账户数据失败")})}},created:function(){this.getAccountList(),this.getCurrentPositionsListData(),this.getPositionsHistoryListData()},components:{"wbc-page":i.a}}},wR5p:function(e,t,a){var i=a("3NVf");"string"==typeof i&&(i=[[e.i,i,""]]),i.locals&&(e.exports=i.locals);a("rjj0")("3a03ee91",i,!0,{})}});
//# sourceMappingURL=12.js.map?v=1770998444122