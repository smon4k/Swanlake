webpackJsonp([12],{"2+wV":function(t,e,i){"use strict";var a=i("pMNZ"),s=i("+zHA");e.a={data:function(){return{currPage:1,pageSize:10,total:100,PageSearchWhere:[],name:"",tableData:[],TreeProps:{children:"child",hasChildren:"hasChildren"},dialogVisibleShow:!1,FormData:{id:"",account_id:"",symbol:"",multiple:"3",position_percent:"0.8",total_position:"5000",stop_profit_loss:"0.007",grid_step:"0.002",commission_price_difference:"50",max_position:"",max_position_list:[],grid_percent_list:[{direction:"long",buy:.04,sell:.05},{direction:"short",buy:.05,sell:.04}]},accountList:[],availableSymbols:["BTC-USDT","ETH-USDT","BNB-USDT"],DialogTitle:"添加",is_save_add_start:1,AuthMenuRuleData:[],rules:{account_id:[{required:!0,message:"请选择账户",trigger:"change"}],symbol:[{required:!0,message:"请输入币种",trigger:"blur"}],multiple:[{required:!0,message:"请输入多空倍数",trigger:"blur"}],position_percent:[{required:!0,message:"请输入开仓比例",trigger:"blur"}],max_position:[{required:!0,message:"请输入最大仓位(JSON)",trigger:"blur"}],total_position:[{required:!0,message:"请输入总仓位",trigger:"blur"}],stop_profit_loss:[{required:!0,message:"请输入止盈止损",trigger:"blur"}],grid_step:[{required:!0,message:"请输入网格间距",trigger:"blur"}],commission_price_difference:[{required:!0,message:"请输入价格差",trigger:"blur"}]}}},methods:{addMaxPosition:function(){console.log(this.FormData.max_position_list),this.FormData.max_position_list.push({symbol:"",value:0})},removeMaxPosition:function(t){this.FormData.max_position_list.splice(t,1)},isSymbolSelected:function(t){return this.FormData.max_position_list.some(function(e){return e.symbol===t})},getListData:function(t){var e=this,i=this.$data;(!t||void 0==t||t.length<=0)&&(t={limit:i.pageSize,page:i.currPage}),Object(s.b)("/Grid/grid/getRobotConfig",t,function(t){console.log(t),1e4==t.data.code?(e.tableData=t.data.data.data,e.total=t.data.data.count):e.$message.error("加载数据失败")})},getAccountList:function(){var t=this;Object(s.b)("/Grid/grid/getAccountList",{},function(e){console.log(e),1e4==e.data.code?t.accountList=e.data.data:t.$message.error("加载账户数据失败")})},SearchClick:function(){var t={page:this.currPage,limit:this.pageSize};this.name&&""!==this.name&&(t.name=this.name),this.PageSearchWhere=[],this.PageSearchWhere=t,this.getListData(t)},SearchReset:function(){this.province="",this.city="",this.area="",this.PageSearchWhere=[],this.getListData()},limitPaging:function(t){this.pageSize=t,this.PageSearchWhere.limit&&void 0!==this.PageSearchWhere.limit&&(this.PageSearchWhere.limit=t),this.getListData(this.PageSearchWhere)},skipPaging:function(t){this.currPage=t,this.PageSearchWhere.page&&void 0!==this.PageSearchWhere.page&&(this.PageSearchWhere.page=t),this.getListData(this.PageSearchWhere)},DelData:function(t){var e=this;this.$confirm("此操作将永久删除该数据, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(s.b)("/Grid/grid/deleteRobotConfig",{id:t.id},function(t){t&&1e4==t.data.code?(e.getListData(),e.$message({type:"success",message:"删除成功!"})):e.$message.error(t.data.msg)})}).catch(function(){e.$message({type:"info",message:"已取消删除"})})},UpdateAdminUserInfo:function(t){console.log(t),this.is_save_add_start=2,this.DialogTitle="修改",this.FormData={id:t.id,account_id:t.account_id,symbol:t.symbol,multiple:t.multiple,position_percent:t.position_percent,total_position:t.total_position,stop_profit_loss:t.stop_profit_loss,grid_step:t.grid_step,commission_price_difference:t.commission_price_difference,max_position_list:t.max_position_list,grid_percent_list:t.grid_percent_list},this.dialogVisibleShow=!0},onUpdateSubmit:function(t){var e=this,i={};if(this.FormData.max_position_list.length<=0)return void this.$message.error("请添加仓位配置");this.FormData.max_position_list.forEach(function(t){t.symbol&&(i[t.symbol+"-SWAP"]=t.value)});var a={};this.FormData.grid_percent_list.forEach(function(t){a[t.direction]={buy:parseFloat(t.buy),sell:parseFloat(t.sell)}}),this.$refs[t].validate(function(t){if(!t)return!1;var i=1===e.is_save_add_start?"/Grid/grid/addRobotConfig":"/Grid/grid/updateRobotConfig";Object(s.c)(i,e.FormData,function(t){console.log(t),t&&1e4==t.data.code?(e.dialogVisibleShow=!1,e.$message({type:"success",message:e.DialogTitle+"成功! 1分钟后生效"}),e.getListData()):(e.dialogVisibleShow=!1,e.$message.error(t.data.msg))})})},AddUserInfoShow:function(){this.is_save_add_start=1,this.DialogTitle="添加",this.FormData={id:"",account_id:"",symbol:"",multiple:"3",position_percent:"0.8",total_position:"5000",stop_profit_loss:"0.007",grid_step:"0.002",commission_price_difference:"50",max_position_list:[],grid_percent_list:[{direction:"long",buy:.04,sell:.05},{direction:"short",buy:.05,sell:.04}]},console.log(111),this.dialogVisibleShow=!0},startKeywordList:function(t){var e=this;Object(s.b)("/Admin/Authrule/startAuthRule",{id:t.id,start:t.status},function(t){1e4==t.data.code?e.$message({message:"修改成功",type:"success"}):e.$message.error("修改失败")})},refreshConfig:function(t){var e=this;t&&Object(s.b)("/sigadmin/refresh_config",{account_id:t},function(t){200==t.status?e.$message({message:"刷新持缓存成功",type:"success"}):e.$message.error("刷新持缓存失败")})},resetForm:function(t){this.$refs[t].resetFields(),this.dialogVisibleShow=!1}},created:function(){this.getListData(),this.getAccountList()},components:{"wbc-page":a.a}}},"3/5w":function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("el-breadcrumb",{attrs:{separator:"/"}},[i("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[t._v("首页")]),t._v(" "),i("el-breadcrumb-item",{attrs:{to:""}},[t._v("SIG持仓管理")]),t._v(" "),i("el-breadcrumb-item",{attrs:{to:""}},[t._v("机器人配置")])],1),t._v(" "),i("div",{staticClass:"project-top"},[i("el-form",{staticClass:"demo-form-inline",attrs:{inline:!0}},[i("el-form-item",[i("el-button",{staticClass:"pull-right",attrs:{type:"primary"},on:{click:function(e){return t.AddUserInfoShow()}}},[t._v("添加配置")])],1)],1)],1),t._v(" "),t._l(t.tableData,function(e,a){return i("el-descriptions",{key:a,attrs:{title:e.account_name,border:"",column:2}},[i("template",{slot:"extra"},[i("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(i){return t.UpdateAdminUserInfo(e)}}},[t._v("编辑")]),t._v(" "),i("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(i){return t.DelData(e)}}},[t._v("删除")])],1),t._v(" "),i("el-descriptions-item",{attrs:{label:"API Key"}},[t._v(t._s(e.api_key))]),t._v(" "),i("el-descriptions-item",{attrs:{label:"API Secret"}},[t._v(t._s(e.api_secret))]),t._v(" "),i("el-descriptions-item",{attrs:{label:"倍数"}},[t._v(t._s(e.multiple))]),t._v(" "),i("el-descriptions-item",{attrs:{label:"开仓比例"}},[t._v(t._s(e.position_percent))]),t._v(" "),i("el-descriptions-item",{attrs:{label:"总仓位"}},[t._v(t._s(e.total_position))]),t._v(" "),i("el-descriptions-item",{attrs:{label:"止盈止损"}},[t._v(t._s(e.stop_profit_loss))]),t._v(" "),i("el-descriptions-item",{attrs:{label:"网格间距"}},[t._v(t._s(e.grid_step))]),t._v(" "),i("el-descriptions-item",{attrs:{label:"网格比例配置"}},t._l(e.grid_percent_list,function(e,a){return i("div",{key:a},[i("span",[t._v(t._s(e.direction)+"：")]),t._v(" "),i("span",[t._v("买入比例"+t._s(e.buy))]),t._v("  \n        "),i("span",[t._v("卖出比例"+t._s(e.sell))])])}),0),t._v(" "),i("el-descriptions-item",{attrs:{label:"币种最大仓位数配置\t"}},t._l(e.max_position_list,function(e,a){return i("div",{key:a},[i("span",[t._v(t._s(e.symbol)+"：")]),t._v(" "),i("span",[t._v("最大仓位："+t._s(e.value))])])}),0),t._v(" "),i("el-descriptions-item",{attrs:{label:"价格浮动比例"}},[t._v(t._s(e.commission_price_difference))])],2)}),t._v(" "),t.tableData&&t.tableData.length>0?i("el-row",[i("el-col",{attrs:{span:24}},[i("div",{staticStyle:{float:"right"}},[i("wbc-page",{attrs:{total:t.total,pageSize:t.pageSize,currPage:t.currPage},on:{changeLimit:t.limitPaging,changeSkip:t.skipPaging}})],1)])],1):t._e(),t._v(" "),i("el-dialog",{attrs:{title:t.DialogTitle+"配置",visible:t.dialogVisibleShow,width:"80%"},on:{"update:visible":function(e){t.dialogVisibleShow=e}}},[i("el-form",{ref:"FormData",attrs:{model:t.FormData,rules:t.rules,"label-width":"150px"}},[i("el-form-item",{attrs:{label:"选择账户",prop:"account_id"}},[i("el-select",{attrs:{placeholder:"请选择账户",clearable:"",disabled:2==t.is_save_add_start},model:{value:t.FormData.account_id,callback:function(e){t.$set(t.FormData,"account_id",e)},expression:"FormData.account_id"}},t._l(t.accountList,function(t){return i("el-option",{key:t.id,attrs:{label:t.name||"账户ID: "+t.id+"-"+t.api_key,value:t.id}})}),1)],1),t._v(" "),i("el-form-item",{attrs:{label:"多空倍数",prop:"multiple"}},[i("el-input",{attrs:{placeholder:"如 3"},model:{value:t.FormData.multiple,callback:function(e){t.$set(t.FormData,"multiple",e)},expression:"FormData.multiple"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"开仓比例",prop:"position_percent"}},[i("el-input",{attrs:{placeholder:"如 0.8"},model:{value:t.FormData.position_percent,callback:function(e){t.$set(t.FormData,"position_percent",e)},expression:"FormData.position_percent"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"最大仓位配置"}},[t._l(t.FormData.max_position_list,function(e,a){return i("div",{key:a,staticStyle:{display:"flex","align-items":"center","margin-bottom":"10px"}},[i("el-select",{staticStyle:{width:"180px","margin-right":"10px"},attrs:{placeholder:"选择交易对"},model:{value:e.symbol,callback:function(i){t.$set(e,"symbol",i)},expression:"item.symbol"}},t._l(t.availableSymbols,function(a){return i("el-option",{key:a,attrs:{label:a,value:a,disabled:t.isSymbolSelected(a)&&e.symbol!==a}})}),1),t._v(" "),i("el-input-number",{staticStyle:{width:"140px","margin-right":"10px"},attrs:{min:0,step:100},model:{value:e.value,callback:function(i){t.$set(e,"value",i)},expression:"item.value"}}),t._v(" "),i("el-button",{attrs:{type:"danger",icon:"el-icon-delete"},on:{click:function(e){return t.removeMaxPosition(a)}}})],1)}),t._v(" "),i("el-button",{attrs:{type:"primary",icon:"el-icon-plus",disabled:t.FormData.max_position_list.length>=t.availableSymbols.length},on:{click:t.addMaxPosition}},[t._v("添加")]),t._v(" "),t.FormData.max_position_list.length>=t.availableSymbols.length?i("p",{staticStyle:{color:"#999"}},[t._v("\n        已添加所有可配置交易对\n      ")]):t._e()],2),t._v(" "),i("el-form-item",{attrs:{label:"网格买卖比例配置"}},t._l(t.FormData.grid_percent_list,function(e,a){return i("div",{key:a,staticStyle:{display:"flex","align-items":"center","margin-bottom":"10px"}},[i("el-select",{staticStyle:{width:"120px","margin-right":"10px"},attrs:{disabled:""},model:{value:e.direction,callback:function(i){t.$set(e,"direction",i)},expression:"item.direction"}},[i("el-option",{attrs:{label:"做多 (long)",value:"long"}}),t._v(" "),i("el-option",{attrs:{label:"做空 (short)",value:"short"}})],1),t._v(" "),i("el-form-item",{staticClass:"grid-form-label",attrs:{label:"买入比例",prop:""}},[i("el-input",{attrs:{placeholder:"买入比例"},model:{value:e.buy,callback:function(i){t.$set(e,"buy",i)},expression:"item.buy"}})],1),t._v(" "),i("el-form-item",{staticClass:"grid-form-label",attrs:{label:"卖出比例",prop:""}},[i("el-input",{attrs:{placeholder:"卖出比例"},model:{value:e.sell,callback:function(i){t.$set(e,"sell",i)},expression:"item.sell"}})],1)],1)}),0),t._v(" "),i("el-form-item",{attrs:{label:"总仓位",prop:"total_position"}},[i("el-input",{attrs:{placeholder:"如 5000"},model:{value:t.FormData.total_position,callback:function(e){t.$set(t.FormData,"total_position",e)},expression:"FormData.total_position"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"止盈止损比",prop:"stop_profit_loss"}},[i("el-input",{attrs:{placeholder:"如 0.007"},model:{value:t.FormData.stop_profit_loss,callback:function(e){t.$set(t.FormData,"stop_profit_loss",e)},expression:"FormData.stop_profit_loss"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"网格间距",prop:"grid_step"}},[i("el-input",{attrs:{placeholder:"如 0.002"},model:{value:t.FormData.grid_step,callback:function(e){t.$set(t.FormData,"grid_step",e)},expression:"FormData.grid_step"}})],1),t._v(" "),i("el-form-item",{attrs:{label:"价格浮动比(百分比)",prop:"commission_price_difference"}},[i("el-input",{attrs:{placeholder:"如 0.06%"},model:{value:t.FormData.commission_price_difference,callback:function(e){t.$set(t.FormData,"commission_price_difference",e)},expression:"FormData.commission_price_difference"}})],1),t._v(" "),i("el-form-item",[i("el-button",{on:{click:function(e){return t.resetForm("FormData")}}},[t._v("取消")]),t._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.onUpdateSubmit("FormData")}}},[t._v("立即"+t._s(t.DialogTitle))])],1)],1)],1)],2)},s=[],o={render:a,staticRenderFns:s};e.a=o},AO5d:function(t,e,i){"use strict";e.a={props:["total","pageSize","currPage"],data:function(){return{}},methods:{handleSizeChange:function(t){this.$emit("changeLimit",t)},handleCurrentChange:function(t){this.$emit("changeSkip",t)}}}},KMEk:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("nav",[i("div",{staticClass:"grid-content"},[i("div",{staticClass:"pagination"},[i("el-pagination",{attrs:{"current-page":t.currPage,"page-sizes":[10,20,30,50,100],"page-size":t.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:t.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)])])},s=[],o={render:a,staticRenderFns:s};e.a=o},"c+VX":function(t,e,i){"use strict";function a(t){i("yQ18")}Object.defineProperty(e,"__esModule",{value:!0});var s=i("2+wV"),o=i("3/5w"),r=i("VU/8"),l=a,n=r(s.a,o.a,!1,l,null,null);e.default=n.exports},gqDt:function(t,e,i){e=t.exports=i("FZ+f")(!0),e.push([t.i,".pagination[data-v-eeb91266]{float:right}","",{version:3,sources:["C:/Users/v-linhuiqin/www/Swanlake/public/AdminServer/src/components/Page.vue"],names:[],mappings:"AACA,6BACE,WAAa,CACd",file:"Page.vue",sourcesContent:["\n.pagination[data-v-eeb91266]{\n  float: right;\n}\n"],sourceRoot:""}])},pMNZ:function(t,e,i){"use strict";function a(t){i("zvqY")}var s=i("AO5d"),o=i("KMEk"),r=i("VU/8"),l=a,n=r(s.a,o.a,!1,l,"data-v-eeb91266",null);e.a=n.exports},yQ18:function(t,e,i){var a=i("z9+N");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);i("rjj0")("bf87c9fe",a,!0,{})},"z9+N":function(t,e,i){e=t.exports=i("FZ+f")(!0),e.push([t.i,".grid-form-label .el-form-item__label{width:70px!important}.grid-form-label .el-form-item__content{margin-left:70px!important}.el-descriptions{margin-bottom:20px}.el-descriptions .el-descriptions__header{margin-bottom:10px}","",{version:3,sources:["C:/Users/v-linhuiqin/www/Swanlake/public/AdminServer/src/pages/Grid/config.vue"],names:[],mappings:"AACA,sCAAsC,oBAAqB,CAC1D,AACD,wCAAwC,0BAA2B,CAClE,AACD,iBAAiB,kBAAkB,CAClC,AACD,0CAA0C,kBAAkB,CAC3D",file:"config.vue",sourcesContent:["\n.grid-form-label .el-form-item__label{width:70px !important\n}\n.grid-form-label .el-form-item__content{margin-left:70px !important\n}\n.el-descriptions{margin-bottom:20px\n}\n.el-descriptions .el-descriptions__header{margin-bottom:10px\n}\n"],sourceRoot:""}])},zvqY:function(t,e,i){var a=i("gqDt");"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);i("rjj0")("47347ea0",a,!0,{})}});
//# sourceMappingURL=12.js.map?v=1745826416775